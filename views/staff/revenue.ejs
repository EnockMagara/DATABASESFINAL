<h1>View Revenue</h1>

<button id="earnedRevenueButton">View Earned Revenue</button>
<div id="earnedRevenueResult"></div>

<script>
// AJAX for viewing earned revenue
document.getElementById('earnedRevenueButton').addEventListener('click', function() {
    fetch('/staff/earned-revenue', {
        method: 'GET' // Use GET method to fetch data
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok'); // Throw an error if response is not ok
        }
        return response.json(); // Parse the response as JSON
    })
    .then(data => {
        if (data.revenueLastMonth && data.revenueLastYear) {
            // Display the revenue data if present in the response
            document.getElementById('earnedRevenueResult').innerHTML = `<p>Last Month: $${data.revenueLastMonth.total_revenue_last_month}</p><p>Last Year: $${data.revenueLastYear.total_revenue_last_year}</p>`;
        } else {
            // Handle case where expected data is not present in the response
            document.getElementById('earnedRevenueResult').innerText = 'Unexpected response format';
        }
    })
    .catch(error => {
        // Log the error and display a user-friendly message
        console.error('Error:', error);
        document.getElementById('earnedRevenueResult').innerText = 'An error occurred while fetching revenue data';
    });
});
</script>
